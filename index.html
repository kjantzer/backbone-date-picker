<html>
<head>

<title>Backbone.js Date Picker</title>
<meta charset="utf-8"></meta>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  // FIXME
  // ga('create', 'UA-44608486-7', 'kjantzer.github.io');
  // ga('send', 'pageview');

</script>

<!-- Backbone.js Dependencies -->
<script src="lib/jquery.min.js"></script>
<script src="lib/underscore.min.js"></script>
<script src="lib/underscore.string.min.js"></script>
<script src="lib/backbone.min.js"></script>
<script src="lib/moment.js"></script>

<script src="lib/require.js"></script>

<link href="style.css" rel="stylesheet" type="text/css">
<script src="date-picker.min.js"></script>

</head>
<body>

<a href="https://github.com/kjantzer/backbone-date-picker" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#FF8A65; position: absolute; top: 0; border: 0; right: 0;"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>


<header>

    <nav class="menu">
        <a class="menu-btn" onclick="this.parentNode.classList.toggle('open')"><img src="lib/list.png"></a>
        <ul id="menu"></ul>
    </nav>
    <script>
    $.getJSON('https://gist.githubusercontent.com/kjantzer/9abbb6cc17d1b6699221/raw', function(menu){
        var $menu = $('#menu');
        $.each(menu, function(indx, m){
            $menu.append('<li><a href="http://kjantzer.github.io/'+m.key+'">'+m.label+
                '<div class="description">'+(m.description||'')+'</div>'+
                '</a></li>')
        })
    })
    
    // hack for demo
    function DatePicker(opts){
        require(['date-picker'], function(DatePicker){
            new DatePicker(opts)
        })
    }
    </script>

        <h1>
                Date Picker
        </h1>

        <h3>
                An inline date picker based on Moment.js
        </h3>
        
        <article>
            <div id="top-demo"></div>
            <script>
            new DatePicker({
                appendTo: '#top-demo',
                format:'m,dy', 
                m:{format:'short'}
            })
            </script>
            <div class="note">
                Hover over the date and scroll or type a date
            </div>
        </article>

</header>

<section>

    <p style="float: right"><b>Version 0.1.0</b></p>
    <h1>Overview</h1>

    <p>
        There are a lot of date pickers that use a calendar approach, but this plugin attempts to keep the process as simple and minimal as possible by letting the user edit the date in line.
    </p>
    
    <p>
        Once hovered over a date unit, a user can type the number they want or use the scroll wheel to quickly change the value.
    </p>
    
    <p>
        Pressing <code>tab</code>, <code>shift+tab</code>, or <code>left/right</code> arrow keys will navigate between the different units. Hitting <code>esc</code> will reset the value (while editing and before picker is saved)
    </p>
    
    <hr>

    <h1>Examples</h1>
    
    <div class="demo">
        <div id="demo1"></div>
        <script>
        new DatePicker({
            appendTo: '#demo1',
            format:'m/d/y'
        })
        </script>
        <pre>
new DatePicker({
    appendTo: '#demo1',
    format:'m/d/y'
})
        </pre>
    
    </div>
    
    
    <div class="demo">
        <div id="demo2"></div>
        <script>
        new DatePicker({
            appendTo: '#demo2',
            format:'m-d-y'
        })
        </script>
        <pre>
new DatePicker({
    appendTo: '#demo2',
    format:'m-d-y'
})
        </pre>
    
    </div>
    
    <div class="demo">
        <div id="demo3"></div>
        <script>
        new DatePicker({
            appendTo: '#demo3',
            format:'m,d y',
            m: {format: 'short'}
        })
        </script>
        <pre>
new DatePicker({
    appendTo: '#demo3',
    format:'m,d y',
    m: {format: 'short'}
})
        </pre>
    
    </div>
    
    <div class="demo">
        <div id="demo4"></div>
        <script>
        new DatePicker({
            appendTo: '#demo4',
            format:'my',
            m: {format: 'long'},
            val: new Date()
        })
        </script>
        <pre>
new DatePicker({
    appendTo: '#demo4',
    format:'my',
    m: {format: 'long'},
    val: new Date()
})
        </pre>
    
    </div>
    
    <div class="demo">
        <div id="demo5"></div>
        <script>
        new DatePicker({
            appendTo: '#demo5',
            format:'y',
            val: new Date(),
            valFormat: 'YYYY',
            onSave: function(dp, val){
                alert(val)
            }
        })
        </script>
        <pre>
new DatePicker({
    appendTo: '#demo5',
    format:'y',
    val: new Date(),
    valFormat: 'YYYY',
    onSave: function(dp, val){
        alert(val)
    }
})
        </pre>
    
    </div>
    
    <hr />
    
    <h1>Options</h1>
    
<pre>
defaultOpts: {
    appendTo: null,
    val: '',
    format: 'y-m-d',
    valFormat: 'YYYY-MM-DD',
    className: '',
    deltaThreshold: 70, // how much scrolling is needed to change values
    typeDelay: 340, // how long between keystrokes before using value
    navLink: true, // when navigating units and reaching the end, will jump to next date picker if right next
    saveOnBlur: true,
    onSave: null,
    onBlur: null,
    
    // options for each unit
    y: {
        placeholder: 'yyyy'
    }, 
    m: {
        format: '', // short, long, fn()
        placeholder: 'mm'
    },
    d: {
        format: '', // fn()
        placeholder: 'dd'
    }
}
</pre>
    
    <h3><code>val</code></h3>
    <p>Value of the date picker upon initialization. This can be a <code>Date()</code> object or a date string.</p>
    
    <h3><code>valFormat</code></h3>
    <p>The format of the date picker value when using the <code>.value()</code> method. Refer to the <a href="https://momentjs.com/docs/#/displaying/format/">moment.js docs</a> for supported sytax</p>
    
    <h3><code>saveOnBlur:true</code></h3>
    <p>When the date picker loses focus, it will determine if the value has changed since the last time a "save" action was triggered and if so, will call <code>onSave</code></p>
    
    <h3><code>onSave: function(dp, val){}</code></h3>
    <p>Triggered when the date picker has changed and lost focus (only when <code>saveOnBlur</code> is true)</p>
    
    <h3><code>onBlur: function(dp, val){}</code></h3>
    <p>This could be used to test the value first and manually save or reset based on applicatoin needs. To do that, turn <code>saveOnBlur</code> to false, then call <code>dp.save()</code> or <code>db.reset()</code>.</p>
    
    <h3><code>y:{}, m:{}, d:{}</code></h3>
    <p>These are options for each unit</p>
    
    <h3><code>[ymd].placeholder</code></h3>
    <p>This is the text displayed when the unit does not have a value</p>
        
    <h3><code>[ymd].format</code></h3>
    <p>How the unit is displayed can be overidden with a custom function. Month also has two predefined presets <code>short</code> and <code>long</code>. <i>Year does not support format.</i></p>
    
    
    <hr />
    
    <h1>Methods</h1>
    
    <h3><code>.save()</code></h3>
    <p>Removes the "unsaved" state and sets the current value as <i>the</i> value.</p>
    
    <h3><code>.reset()</code></h3>
    <p>Puts the date back to the last time it was saved (if never saved, it will revert to the original init value). This can also be triggered by pressing <code>esc</code></p>
    
    <h3><code>.value()</code></h3>
    <p>Gets the current value of the date picker (regardless of the "unsaved" state)</p>
    
    <h3><code>.appendTo(el)</code></h3>
    <p>Renders and appends the date picker to the element. <code>el</code> can be a string, native element or jQuery object. This isn't needed if you specify an <code>appendTo:</code> option upon init.</p>
        
        
    <hr />
    
    <h1>Styling</h1>
    
    <h3><code>.editing</code></h3>
    <p>This class is applied when ever the date picker is being edited</p>
    
    <h3><code>.unsaved</code></h3>
    <p>This class can be found when the date picker value has changed but not been "saved"</p>
    
    <hr>

    <h1>Dependencies</h1>

    <p><a href="http://backbonejs.org">Backbone.js</a> (and its dependencies: underscore, jquery)</p>
    <p><a href="http://gabceb.github.io/underscore.string.site/">Underscore.string</a></p>
    <p><a href="https://momentjs.com/">Moment.js</a> - date parsing and manipulation</p>

    <hr>
    
    <h1>TODO</h1>

    <p>
        - add ability to scroll a unit and only change that unit (right now, if scrolling from Dec to Jan, the year will change)<br />
    	- add support for time?<br />
    	- method for "setting" the date after initialization<br />
    	- add date range limiting (min and/or max)<br />
    	- add option for turning scroll feature off?
    </p>
    

    <hr />
    
    <h1>License</h1>

    <p>MIT © <a href="http://kevinjantzer.com">Kevin Jantzer</a></p>


    <hr>

    <small>Built by <a href="http://kevinjantzer.com">Kevin Jantzer</a>, <a href="http://blackstoneaudio.com">Blackstone Audio Inc.</a></small>
    
</section>

</body>
</html>
